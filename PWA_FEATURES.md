# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PWA

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–º–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ iOS –∏ Android
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–æ–∂–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É

### 2. –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- Fallback –Ω–∞ –æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ü—Ä–æ–º–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Skip waiting –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫—ç—à–µ–π

### 4. –°–µ—Ç–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏ (–æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏
- Retry –º–µ—Ö–∞–Ω–∏–∑–º

### 5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è:

#### Cache First (–¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã)
- –®—Ä–∏—Ñ—Ç—ã Google Fonts
- –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
- –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã

#### Stale While Revalidate (—á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ)
- CSS —Å—Ç–∏–ª–∏ Google Fonts
- JavaScript —Ñ–∞–π–ª—ã
- CSS —Ñ–∞–π–ª—ã
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- Next.js Image Optimization

#### Network First (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- JSON –¥–∞–Ω–Ω—ã–µ
- –î–∞–Ω–Ω—ã–µ API —Å fallback

#### Network Only (–≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ)
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 6. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Code splitting –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü
- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (AVIF, WebP)
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å–∂–∞—Ç–∏–µ
- Bundle analyzer
- Tree shaking

### 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Security headers
- CSP (Content Security Policy) ready
- XSS –∑–∞—â–∏—Ç–∞
- Clickjacking –∑–∞—â–∏—Ç–∞
- HTTPS-only –≤ production

### 8. –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- Mobile-first –¥–∏–∑–∞–π–Ω
- Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞
- Viewport –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- Status bar —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é

### Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –≤ `public/sw-custom.js`:
- Push —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- Notification click –æ–±—Ä–∞–±–æ—Ç–∞–Ω
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å backend –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```typescript
// –î–æ–±–∞–≤—å—Ç–µ –≤ service worker
self.addEventListener('periodicsync', (event) => {
  if (event.tag === 'sync-data') {
    event.waitUntil(syncData());
  }
});
```

### Background Sync
```typescript
// –î–æ–±–∞–≤—å—Ç–µ –≤ service worker
self.addEventListener('sync', (event) => {
  if (event.tag === 'sync-messages') {
    event.waitUntil(syncMessages());
  }
});
```

### Web Share API
```typescript
if (navigator.share) {
  await navigator.share({
    title: '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
    text: '–¢–µ–∫—Å—Ç',
    url: window.location.href,
  });
}
```

### Shortcuts (–±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è)
–î–æ–±–∞–≤—å—Ç–µ –≤ `manifest.json`:
```json
"shortcuts": [
  {
    "name": "–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É",
    "short_name": "–ö–∞—Ä—Ç–∞",
    "description": "–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–∞—Ä—Ç–µ",
    "url": "/map",
    "icons": [{ "src": "/icons/map-icon.png", "sizes": "192x192" }]
  }
]
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Core Web Vitals
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –≤ `src/utils/performance.ts`:
- LCP (Largest Contentful Paint)
- FID (First Input Delay)
- CLS (Cumulative Layout Shift)

### Custom –º–µ—Ç—Ä–∏–∫–∏
- Navigation Timing
- Resource Timing
- Performance Marks
- Performance Measures

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç
`public/manifest.json` - –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–≤–µ—Ç–∞

### 2. –°–æ–∑–¥–∞–π—Ç–µ –∏–∫–æ–Ω–∫–∏
```bash
node scripts/generate-icons.js  # –°–æ–∑–¥–∞–µ—Ç placeholder
# –ó–∞—Ç–µ–º –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–µ –∏–∫–æ–Ω–∫–∏
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
`next.config.mjs` - –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã

### 4. –î–æ–±–∞–≤—å—Ç–µ analytics
```typescript
// src/lib/analytics.ts
export const trackEvent = (event: string, data?: unknown) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', event, data);
  }
};
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ù—É–∂–µ–Ω VAPID –∫–ª—é—á –∏ backend –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:
```bash
npm install web-push
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è UI

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
`src/styles/globals.css` - CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `--color-primary`
- `--color-background`
- `--color-surface`
- –∏ –¥—Ä.

### –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `prefers-color-scheme`

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–í—Å–µ PWA –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:
- `src/components/install-prompt.tsx`
- `src/components/network-status.tsx`
- `src/components/update-prompt.tsx`

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### iOS (Safari)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –¥–æ–º–æ–π"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ apple-touch-icon
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ viewport-fit=cover

### Android (Chrome)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ manifest.json
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ maskable –∏–∫–æ–Ω–∫–∏

### Desktop (Chrome, Edge)
- –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- Standalone —Ä–µ–∂–∏–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OS

## üêõ –û—Ç–ª–∞–¥–∫–∞

### Chrome DevTools
- Application ‚Üí Manifest
- Application ‚Üí Service Workers
- Application ‚Üí Cache Storage
- Network ‚Üí Offline —Ä–µ–∂–∏–º

### Lighthouse
```bash
npm run build && npm start
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Lighthouse
```

### –õ–æ–≥–∏
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `src/utils/logger.ts` –¥–ª—è debug –ª–æ–≥–æ–≤


